{% extends "user_dashboard.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/create_feedback.css' %}">
{% endblock css %}

{% block dashboard_content %}
<div class="feedback-container">
    <header style="text-align: center;">
        <img src="{% if logo %}{{ logo.logo.url }}{% else %}{% static 'images/logo.jpeg' %}{% endif %}" alt="Office Logo" class="logo" style="max-height: 100px;">
        <h1 class="feedback-title">{{ request.user.office_name|default:"Your Office" }}</h1>
    </header>

    <h2 class="section-title">सुझाव / गुनासो / प्रतिक्रिया पेटीका</h2>
    <p>तपाईको सुझाव, गुनासो अथबा प्रतिक्रिया यहाँ बाट दिनुहोस ।</p>

    <form class="form" method="POST" action="{% if feedback_uuid %}?feedback_uuid={{ feedback_uuid }}{% endif %}" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- Rating -->
        <div class="section">
            <label><strong>यस कार्यालयको सेवा तपाईलाई कस्तो लाग्यो ? *</strong></label><br>
            {{ form.rating }}
            {% if form.rating.errors %}
                <div class="alert alert-danger">{{ form.rating.errors }}</div>
            {% endif %}
        </div>

        <!-- Feedback -->
        <div class="section">
            <label for="{{ form.feedback_text.id_for_label }}"><strong>तपाईको सुझाव / गुनासो / प्रतिक्रिया दिनुहाेाॅ *</strong></label><br>
            {{ form.feedback_text }}
            {% if form.feedback_text.errors %}
                <div class="alert alert-danger">{{ form.feedback_text.errors }}</div>
            {% endif %}
        </div>

        <!-- File Upload -->
        <div class="section">
            <label for="{{ form.attachment.id_for_label }}">सम्बन्धित फोटो अथवा फाईल अपलोड गर्नुहोस (Optional)</label>
            {{ form.attachment }}
            {% if form.attachment.errors %}
                <div class="alert alert-danger">{{ form.attachment.errors }}</div>
            {% endif %}
        </div>

        <!-- Personal Info -->
        <div class="section grid-two">
            <div>
                <label for="{{ form.name.id_for_label }}">नाम (Name)*</label>
                {{ form.name }}
                {% if form.name.errors %}
                    <div class="alert alert-danger">{{ form.name.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label for="{{ form.address.id_for_label }}">ठेगाना (Address)*</label>
                {{ form.address }}
                {% if form.address.errors %}
                    <div class="alert alert-danger">{{ form.address.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label for="{{ form.mobile.id_for_label }}">माेाजां (Mobile)*</label>
                {{ form.mobile }}
                {% if form.mobile.errors %}
                    <div class="alert alert-danger">{{ form.mobile.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label for="{{ form.email.id_for_label }}">ईमेल (Email)</label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="alert alert-danger">{{ form.email.errors }}</div>
                {% endif %}
            </div>
        </div>

        <!-- Anonymous Option -->
        <div class="section">
            <label><strong>Anonymous My Info?</strong></label><br>
            {{ form.anonymous }}
            {% if form.anonymous.errors %}
                <div class="alert alert-danger">{{ form.anonymous.errors }}</div>
            {% endif %}
        </div>

        <!-- Feedback Date -->
        {{ form.feedback_date.as_hidden }}

        <!-- Submit -->
        <div class="section">
            <button type="submit" class="submit-btn">पेश गर्नुहोस (Submit)</button>
        </div>

        <!-- Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success mt-3">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <p class="note text-muted mt-2">तपाईको अमुल्य सुझावको लागि धन्यबाद । सुझावको बिवरण जाच्छ गरी आवश्यक प्रकृयामा जानेछौ ।</p>
    </form>
</div>
{% endblock dashboard_content %}