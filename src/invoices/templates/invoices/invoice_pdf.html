{% load static %}
<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <style>
        @font-face {
            font-family: 'NotoSansDevanagari';
            src: url('{% static "fonts/NotoSansDevanagari-Regular.ttf" %}') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        body {
            font-family: 'NotoSansDevanagari', 'DejaVu Sans', Arial, sans-serif;
            font-size: 14px;
            margin: 0 auto;
            padding: 10mm;
            background-color: #eaf6ff;
        }

        .invoice-box {
            width: 100%;
        }

        .section {
            margin-top: 13px;
        }

        .section-title {
            font-weight: bold;
            color: #0077cc;
            margin-bottom: 6px;
            font-size: 16px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        td {
            padding: 4px 3px;
            vertical-align: top;
        }

        .value-box {
            border: 1px solid #ccc;
            padding: 1px 4px;
            background-color: #f9f9f9;
            min-height: 18px;
            margin-left: 2px;
        }

        .logo-row {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            margin-bottom: 10px;
        }
    
        .logo-row img {
            position: absolute;
            left: 0;
            height: 40px;
        }
    
        .heading {
            font-size: 16px;
            color: white;
            background-color: #28a745;
            padding: 6px 10px;
            border-radius: 16px;
        }

        .signature-box {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
        }

        .signature-box div {
            width: 48%;
        }

        .note {
            font-style: italic;
            color: #555;
        }

        @page {
            size: A4;
            margin: 10mm;
        }
    </style>
</head>
<body>
    <div class="invoice-box">
        <div class="logo-row">
           {% if logo_base64 %}
   <img src="data:image/png;base64,{{ logo_base64 }}" alt="Logo" />
{% else %}
   <img src="{{ logo_url }}" alt="Logo" />
{% endif %}

            <div class="heading">Rent Invoice</div>
        </div>

        <div class="section" style="margin-top: 15px;">
            <table>
                <tr>
                    <td>सि. नं.</td>
                    <td><div class="value-box">{{ invoice.serial_number }}</div></td>
                    <td>भाडा महिना:</td>
                    <td><div class="value-box">{{ invoice.rent_month }}</div></td>
                    <td>मिति:</td>
                    <td><div class="value-box">{{ invoice.date }}</div></td>
                </tr>
            </table>
        </div>

        <div class="section" style="border-radius:15px; border:1px solid black; padding: 5px;">
            <table>
                <tr>
                    <td>बहालवालाको नाम:</td>
                    <td colspan="6"><div class="value-box">{{ invoice.tenant.name }}</div></td>
                </tr>
            </table>
            <div class="section-title">बहालको विवरण:</div>
            <table>
                <tr>
                    <td>घर नं.:</td>
                    <td><div class="value-box">{{ invoice.house_number }}</div></td>
                    <td>फ्ल्याट नं.:</td>
                    <td><div class="value-box">{{ invoice.flat_number }}</div></td>
                    <td>कोठा, सटर, पसल, अन्य नं.:</td>
                    <td><div class="value-box">{{ invoice.room_no }}</div></td>
                </tr>
                <tr>
                    <td colspan="6">घर, बिल्डिङ, अपार्टमेन्ट, बंगला नाम वा नम्बर :<div class="value-box">{{ invoice.building_name }}</div></td>
                </tr>
                <tr>
                    <td colspan="6">प्यान / भ्याट नं.:<div class="value-box">{% if invoice.pan_or_vat_number %}{{ invoice.pan_or_vat_number }}{% endif %}</div></td>
                </tr>
            </table>
        </div>

        <div class="section" style="border-radius:15px; border:1px solid black; padding: 5px;">
            <div class="section-title">शुल्क विवरण:</div>
            <table>
                <tr>
                    <td>बहाल रकम:</td>
                    <td><div class="value-box">{{ invoice.rent_amount }}</div></td>
                    <td>पार्किङ:</td>
                    <td><div class="value-box">{{ invoice.parking_fee }}</div></td>
                </tr>
                <tr>
                    <td>बिजुली:</td>
                    <td><div class="value-box">{{ invoice.electricity_fee }}</div></td>
                    <td>सुरक्षा गार्ड:</td>
                    <td><div class="value-box">{{ invoice.security_fee }}</div></td>
                </tr>
                <tr>
                    <td>पिउने पानी:</td>
                    <td><div class="value-box">{{ invoice.drinking_water_fee }}</div></td>
                    <td>जेनरेटर, पावर ब्याकअप:</td>
                    <td><div class="value-box">{{ invoice.generator_power_backup_fee }}</div></td>
                </tr>
                <tr>
                    <td>साधारण पानी:</td>
                    <td><div class="value-box">{{ invoice.normal_water_fee }}</div></td>
                    <td>इन्टरनेट, टेलिफोन, टिभी:</td>
                    <td><div class="value-box">{{ invoice.internet_telephone_tv_fee }}</div></td>
                </tr>
                <tr>
                    <td>फोहोर सरसफाई:</td>
                    <td><div class="value-box">{{ invoice.waste_fee }}</div></td>
                    <td>अन्य खर्च:</td>
                    <td><div class="value-box">{{ invoice.other_fee }}</div></td>
                </tr>
            </table>
        </div>

        <div class="section" style="border-radius:15px; border:1px solid black; padding: 5px;">
            <div class="section-title">जम्मा हिसाबको विवरण:</div>
            <table>
                <tr>
                    <td>छुट रकम:</td>
                    <td><div class="value-box">{{ invoice.discount }}</div></td>
                    <td>जम्मा रकम:</td>
                    <td><div class="value-box">{{ invoice.total_amount }}</div></td>
                </tr>
                <tr>
                    <td>बहाल कर:</td>
                    <td><div class="value-box">{{ invoice.tax }}</div></td>
                    <td>कूल जम्मा रकम:</td>
                    <td><div class="value-box">{{ invoice.grand_total }}</div></td>
                </tr>
                <tr>
                    <td colspan="4">अगाडिको बाँकी रकम:<div class="value-box">{{ invoice.previous_due }}</div></td>
                </tr>
            </table>
        </div>

        <div class="section" style="border-radius:15px; border:1px solid black; padding: 5px;">
            <div class="section-title">बैंक विवरण:</div>
            <table>
                <tr>
                    <td>बैंक नाम:</td>
                    <td><div class="value-box">{{ invoice.bank_name }}</div></td>
                </tr>
                <tr>
                    <td>खाता नम्बर:</td>
                    <td><div class="value-box">{{ invoice.account_number }}</div></td>
                </tr>
                <tr>
                    <td>खाता नाम:</td>
                    <td><div class="value-box">{{ invoice.account_name }}</div></td>
                </tr>
            </table>
        </div>

        <div class="section signature-box" style="border-radius:15px; border:1px solid black; padding: 20px;">
            <div>
                <label>बहाल धनि हस्ताक्षर:</label>
                <div class="value-box">{{ invoice.owner_signature }}</div>
            </div>
            <div>
                <label>बहाल वाला हस्ताक्षर:</label>
                <div class="value-box">{{ invoice.tenant_signature }}</div>
            </div>
        </div>

        <div class="section note">
            <p>नोट: प्रत्येक महिनाको ५ गतेभित्र बहाल बुझाउनु पर्नेछ, अन्यथा १०% जरिवाना लाग्नेछ।</p>
        </div>
        <div style="text-align: center; font-size: 10px; margin-top: 20px;">
            <p>Invoice generated on: {{ generated_date }}</p>
        </div>
    </div>
</body>
</html>