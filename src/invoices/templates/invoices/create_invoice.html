{% extends "user_dashboard.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/create_invoice.css' %}">
<script src="{% static 'js/create_invoice.js' %}"></script>
{% endblock css %}

{% block dashboard_content %}
<div class="invoice-container">
    <header>
        <img src="logo.png" alt="Bhada Pay Logo" class="logo">
        <h1 class="invoice-title">Rent Invoice</h1>
    </header>

    <!-- Displaying success or error messages dynamically -->
    <div class="container">
        {% if form.errors %}
            <div id="messages" class="message-container">
                {% for field, errors in form.errors.items %}
                    {% for error in errors %}
                        <div class="alert alert-danger">
                            {{ field|capfirst }}: {{ error }}
                        </div>
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
    
    <form class="form" method="POST" action="">
        {% csrf_token %}
        
        <!-- Section 1 -->
        <div class="section flex">
            <div>
                <label>सि.नं.: {{ form.serial_number }}</label>
                {% if form.serial_number.errors %}
                    <div class="text-danger">{{ form.serial_number.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>बहाल महिना: {{ form.rent_month }}</label>
                {% if form.rent_month.errors %}
                    <div class="text-danger">{{ form.rent_month.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>मिति: {{ form.date }}</label>
                {% if form.date.errors %}
                    <div class="text-danger">{{ form.date.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <!-- Section 2 -->
        <div class="section">
            <div>
                <label>बहालवालाको नाम: {{ form.tenant }}</label>
                {% if form.tenant.errors %}
                    <div class="text-danger">{{ form.tenant.errors }}</div>
                {% endif %}
            </div>
    
            <h3 class="section-title">बहालको विवरण</h3>
            <div class="section flex">
                <div>
                    <label>घर नं.: {{ form.house_number }}</label>
                    {% if form.house_number.errors %}
                        <div class="text-danger">{{ form.house_number.errors }}</div>
                    {% endif %}
                </div>
                <div>
                    <label>फ्ल्याट नं.: {{ form.flat_number }}</label>
                    {% if form.flat_number.errors %}
                        <div class="text-danger">{{ form.flat_number.errors }}</div>
                    {% endif %}
                </div>
                <div>
                    <label>कोठा नं.: {{ form.room_no }}</label>
                    {% if form.room_no.errors %}
                        <div class="text-danger">{{ form.room_no.errors }}</div>
                    {% endif %}
                </div>
            </div>
    
            <div>
                <label>बिल्डिङ नाम वा नम्बर: {{ form.building_name }}</label>
                {% if form.building_name.errors %}
                    <div class="text-danger">{{ form.building_name.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <!-- Section 3: Rent Details -->
        <h3 class="section-title">सुल्क विवरण</h3>
        <div class="section grid-two">
            <div>
                <label>बहाल रकम: {{ form.rent_amount }}</label>
                {% if form.rent_amount.errors %}
                    <div class="text-danger">{{ form.rent_amount.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>पार्किङ: {{ form.parking_fee }}</label>
                {% if form.parking_fee.errors %}
                    <div class="text-danger">{{ form.parking_fee.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>बिजुली: {{ form.electricity_fee }}</label>
                {% if form.electricity_fee.errors %}
                    <div class="text-danger">{{ form.electricity_fee.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>सुरक्षा गार्ड: {{ form.security_fee }}</label>
                {% if form.security_fee.errors %}
                    <div class="text-danger">{{ form.security_fee.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <!-- Section 4: Total Calculation -->
        <h3 class="section-title">जम्मा हिसाबको विवरण</h3>
        <div class="section grid-two">
            <div>
                <label>छुट रकम: {{ form.discount }}</label>
                {% if form.discount.errors %}
                    <div class="text-danger">{{ form.discount.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>जम्मा रकम: {{ form.total_amount }}</label>
                {% if form.total_amount.errors %}
                    <div class="text-danger">{{ form.total_amount.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>बहाल कर: {{ form.tax }}</label>
                {% if form.tax.errors %}
                    <div class="text-danger">{{ form.tax.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>कुल जम्मा रकम: {{ form.grand_total }}</label>
                {% if form.grand_total.errors %}
                    <div class="text-danger">{{ form.grand_total.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <!-- Section 5: Bank Details -->
        <h3 class="section-title">बैंक विवरण</h3>
        <div class="section">
            <div>
                <label>बैंक नाम: {{ form.bank_name }}</label>
                {% if form.bank_name.errors %}
                    <div class="text-danger">{{ form.bank_name.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>खाता नम्बर: {{ form.account_number }}</label>
                {% if form.account_number.errors %}
                    <div class="text-danger">{{ form.account_number.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>खाता नाम: {{ form.account_name }}</label>
                {% if form.account_name.errors %}
                    <div class="text-danger">{{ form.account_name.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <!-- Section 6: Signatures -->
        <h3 class="section-title">हस्ताक्षर</h3>
        <div class="section">
            <div>
                <label>बहाल धनि हस्ताक्षर: {{ form.owner_signature }}</label>
                {% if form.owner_signature.errors %}
                    <div class="text-danger">{{ form.owner_signature.errors }}</div>
                {% endif %}
            </div>
            <div>
                <label>बहाल वाला हस्ताक्षर: {{ form.tenant_signature }}</label>
                {% if form.tenant_signature.errors %}
                    <div class="text-danger">{{ form.tenant_signature.errors }}</div>
                {% endif %}
            </div>
        </div>
    
        <p class="note">नोट: बैंक मार्फत वा अन्य महत्वपूर्ण जानकारीहरू भए, अनिवार्य प्रविष्ट गर्नुहोस्।</p>
    
        <button type="submit" class="submit-btn">पेश गर्नुहोस्</button>
    </form>
</div>

{% endblock dashboard_content %}
